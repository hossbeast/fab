/* Copyright (c) 2012-2015 Todd Freed <todd.freed@gmail.com>

   This file is part of fab.
   
   fab is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.
   
   fab is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
   
   You should have received a copy of the GNU General Public License
   along with fab.  If not, see <http://www.gnu.org/licenses/>. */

# definitions
+[ $*/../../vars.fab ]

# source invocations
+[ $dcommon ]() @common

# variables
$libname 			= [ liblistwise.so ]
$copts				= [ -fPIC
	# include paths - mark as system to preclude dependency discovery from gcc
	[ $dlibxapi $dlibxlinux $dlibpstring $dlibxunit ~ s/^/-I ]

	[ $dliblistwise ~ ls c -d s/^/-I ]
]
$cflags_final	= [ $cflags_final $copts [ -DLWOPDIR=$lwopdir ~ j ] [ -DLWOPEXT=$lwopext ~ j ] ]
$cflags_debug	= [ $cflags_debug $copts [ -DLWOPDIR=$lwopdir ~ j ] [ -DLWOPEXT=$lwopext ~ j ] ]
$cflags_devel	= [ $cflags_devel $copts [ -DLWOPDIR=$lwopdir_devel ~ j ] [ -DLWOPEXT=$lwopext_devel ~ j ] ]

$lopts				= [ -lpcre -ldl -shared [ -Wl,--version-script=$*/exports ~ j ] ]
$lflags_final	= [ $lflags_final $lopts $libxapi_final $libxlinux_final $libpstring_final [ -Wl,-soname,liblistwise.so ~ j ] ]
$lflags_debug	= [ $lflags_debug $lopts $libxapi_debug $libxlinux_debug $libpstring_debug [ -Wl,-soname,liblistwise.so ~ j ] ]
$lflags_devel	= [ $lflags_devel $lopts $libxapi_devel $libxlinux_devel $libpstring_devel [ -Wl,-soname,liblistwise.devel.so ~ j ] ]

# source files
+[@std.c]($dext = [ final.pic.o ]; $filter = [ ~ ?{ cons{?, l,/test.c v} ]; $rdirs = [ $dliblistwise ~ ls m/op$ v ]; $cc; $cflags = [ $cflags_final ])
+[@std.c]($dext = [ debug.pic.o ]; $filter = [ ~ ?{ cons{?, l,/test.c v} ]; $rdirs = [ $dliblistwise ~ ls m/op$ v ]; $cc; $cflags = [ $cflags_debug ])
+[@std.c]($dext = [ devel.pic.o ]; $filter = [ ~ ?{ cons{?, l,/test.c v} ]; $rdirs = [ $dliblistwise ~ ls m/op$ v ]; $cc; $cflags = [ $cflags_devel ])

+[@std.l]($dext = [ final.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; -$lfabpaths; $cc $flex $flexflags;   $cflags = [ $cflags_final ])
+[@std.l]($dext = [ debug.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; -$lfabpaths; $cc $flex $flexflags;   $cflags = [ $cflags_debug ])
+[@std.l]($dext = [ devel.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; -$lfabpaths; $cc $flex $flexflags;   $cflags = [ $cflags_devel ])
+[@std.y]($dext = [ final.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; -$yfabpaths; $cc $bison $bisonflags; $cflags = [ $cflags_final ])
+[@std.y]($dext = [ debug.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; -$yfabpaths; $cc $bison $bisonflags; $cflags = [ $cflags_debug ])
+[@std.y]($dext = [ devel.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; -$yfabpaths; $cc $bison $bisonflags; $cflags = [ $cflags_devel ])

# generated files
+[@std.flex.states] ($dext = [ final.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; $cc; $cflags = [ $cflags_final ])
+[@std.flex.states] ($dext = [ debug.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; $cc; $cflags = [ $cflags_debug ])
+[@std.flex.states] ($dext = [ devel.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; $cc; $cflags = [ $cflags_devel ])
+[@std.bison.tokens]($dext = [ final.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; $cc; $cflags = [ $cflags_final ])
+[@std.bison.tokens]($dext = [ debug.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; $cc; $cflags = [ $cflags_debug ])
+[@std.bison.tokens]($dext = [ devel.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; $cc; $cflags = [ $cflags_devel ])
+[@std.xapi.errtab] ($dext = [ final.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; $cc; $cflags = [ $cflags_final ]; $fabpaths = [ $dliblistwise/error/PCRE.errtab ~ j ]; $apidata = [1])
+[@std.xapi.errtab] ($dext = [ debug.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; $cc; $cflags = [ $cflags_debug ]; $fabpaths = [ $dliblistwise/error/PCRE.errtab ~ j ]; $apidata = [1])
+[@std.xapi.errtab] ($dext = [ devel.pic.o ]; $gendir = $dliblistwise; $rdirs = $dliblistwise; $cc; $cflags = [ $cflags_devel ]; $fabpaths = [ $dliblistwise/error/PCRE.errtab ~ j ]; $apidata = [1])

# path to each operator so
+[@std.c]($dext = [ final.pic.o ]; $filter = [ ~ ?{ cons{?, l,/test.c v} ]; $rdirs = [ $dliblistwise/op ~ j ]; $cc; $cflags = $cflags_final; -$cobjpaths)
[ $cobjpaths ] :^ [ $liblistwise_final ]
+[@std.c]($dext = [ debug.pic.o ]; $filter = [ ~ ?{ cons{?, l,/test.c v} ]; $rdirs = [ $dliblistwise/op ~ j ]; $cc; $cflags = $cflags_debug; -$cobjpaths)
[ $cobjpaths ] :^ [ $liblistwise_debug ]
+[@std.c]($dext = [ devel.pic.o ]; $filter = [ ~ ?{ cons{?, l,/test.c v} ]; $rdirs = [ $dliblistwise/op ~ j ]; $cc; $cflags = $cflags_devel; -$cobjpaths)
[ $cobjpaths ] :^ [ $liblistwise_devel ]

$oplist_final = [ $dliblistwise ~ ??, s,$,/op lsr l,/test.c v sxf,c,final.so sy ]
$oplist_debug = [ $dliblistwise ~ ??, s,$,/op lsr l,/test.c v sxf,c,debug.so sy ]
$oplist_devel = [ $dliblistwise ~ ??, s,$,/op lsr l,/test.c v sxf,c,devel.so sy ]

# build library and all operators
[ @all ] : [ @final @debug @devel ]
[ @final ] : [ $liblistwise_final $oplist_final ]
[ @debug ] : [ $liblistwise_debug $oplist_debug ]
[ @devel ] : [ $liblistwise_devel $oplist_devel ]

# test sos
+[$dxunit/../fablib/xunit/tests.fab](
	$rdirs = $dliblistwise;
	$cc;
	$dext = [ devel.pic.o ];
	$dscext = [ devel.pic.o ];
	$soext = [ devel.xu.so ];
	$cflags = [ $cflags_devel [ $dlibxunit ~ s/^/-I ] [ $dliblistwise ~ lsr c -d s/^/-isystem ] ];
	-$tsopaths
)

$dlistwise_test = [ $*/test/listwise_test ~ j ]
$listwise_test = [ $dlistwise_test/listwise_test.devel.so ~ j ]

# run all tests
[ @test ] : [ $xunit_devel $oplist_devel $listwise_test $tsopaths ]
{
	[ $xunit_devel ] [ $listwise_test $tsopaths ~ fi ] 1>&501 2>&502
}

[ @test.more ] : [ $xunit_devel  $oplist_devel $listwise_test $tsopaths ]
{
	[ $xunit_devel ] +XUNIT [ $listwise_test $tsopaths ~ fi ] 1>&501 2>&502
}

# test helper
[ $listwise_test ] : [ [ $dlistwise_test/listwise_test.devel.pic.o ~ j ] $liblistwise_devel ]
{
	[ $cc ] [ $cflags_devel ~ uu fi ] [ $dlistwise_test/listwise_test.devel.pic.o ~ j ] [ $liblistwise_devel ] -shared -o [ $@ ]
}

##
## formulas
##

# library exports
[ $*/exports ~ j ] : [ $* ~ lsr lx/c ]
{
	  (echo "{ global: "
	> sed 's/.*API\(DATA\)\?[[:space:]]\+\([a-zA-Z][0-9a-zA-Z_]*\).*/\2;/p; d' <(\
	  cat -- [ $@ ~ rx/ineed fi ] )
	> echo "local: *; };"
	 ) 1>[ $@ ]
}

# link the library
[ $liblistwise_final ] : [ [ $*/exports ~ j ] [ $* ~ ls m/op$ o l/test v lsr sx/c/final.pic.o sy ] ]
{
	[ [ $cc ] [ $cflags_final ~ uu fi ] -o [ $@ ] [ $@ ~ rx/aneedw lx/o uu fi ] [ $lflags_final ~ fi ] ~ ?{ j{ } s{ }{\s\x5c\n}{g} ]
}

[ $liblistwise_debug ] : [ [ $*/exports ~ j ] [ $* ~ ls m/op$ o l/test v lsr sx/c/debug.pic.o sy ] ]
{
	[ [ $cc ] [ $cflags_debug ~ uu fi ] -o [ $@ ] [ $@ ~ rx/aneedw lx/o uu fi ] [ $lflags_debug ~ fi ] ~ ?{ j{ } s{ }{\s\x5c\n}{g} ]
}

[ $liblistwise_devel ] : [ [ $*/exports ~ j ] [ $* ~ ls m/op$ o l/test v lsr sx/c/devel.pic.o sy ] ]
{
	[ [ $cc ] [ $cflags_devel ~ uu fi ] -o [ $@ ] [ $@ ~ rx/aneedw lx/o uu fi ] [ $lflags_devel ~ fi ] ~ ?{ j{ } s{ }{\s\x5c\n}{g} ]
}

[ $liblistwise_final ] :^ [ $libxapi_final $libxlinux_final $libpstring_final ]
[ $liblistwise_debug ] :^ [ $libxapi_debug $libxlinux_debug $libpstring_debug ]
[ $liblistwise_devel ] :^ [ $libxapi_devel $libxlinux_devel $libpstring_devel ]

# link an operator so - which depends on its own .o
[ $oplist_final ~ dj shift ] :: [ $< ~ rx sxf/final.pic.o ]
{
	[ $cc ] [ $cflags_final ~ uu fi ] -o [ $@ ] [ $@ ~ rx/aneedw lx/o l/common o l/op uu fi ] [ $liblistwise_final ] -shared
}

[ $oplist_debug ~ dj shift ] :: [ $< ~ rx sxf/debug.pic.o ]
{
	[ $cc ] [ $cflags_debug ~ uu fi ] -o [ $@ ] [ $@ ~ rx/aneedw lx/o l/common o l/op uu fi ] [ $liblistwise_debug ] -shared
}

[ $oplist_devel ~ dj shift ] :: [ $< ~ rx sxf/devel.pic.o ]
{
	[ $cc ] [ $cflags_devel ~ uu fi ] -o [ $@ ] [ $@ ~ rx/aneedw lx/o l/common o l/op uu fi ] [ $liblistwise_devel ] -shared
}

# operators also depend on the library for linking
[ $oplist_final ] :^ [ $liblistwise_final ]
[ $oplist_debug ] :^ [ $liblistwise_debug ]
[ $oplist_devel ] :^ [ $liblistwise_devel ]

# PCRE errtab is generated from their header file
[ $dliblistwise/error/PCRE.errtab ~ j ]
{
	exec 1>[ $@ ]
	> sed -e 's/#define \(PCRE_ERROR_[A-Z_]\+\) \+(\([-0-9]\+\)).*/\2\t\1/p; d' <\
	`pcre-config --prefix`/include/pcre.h
}

##
## tasks
##

[ @install.final ] : [ @final ]
{
	install -d																							[ $destdir/$libdir ]
	install [ $liblistwise_final ]													[ $destdir/$libdir/$libname ]

	rm -rf																									[ $destdir/$lwopdir ] 2>/dev/null
	install -d																							[ $destdir/$lwopdir ]

	install listwise/liblistwise/op/-X/-X.final.so					[ $destdir/$lwopdir/-X.so ]
	install listwise/liblistwise/op/C/C.final.so						[ $destdir/$lwopdir/C.so ]
	install listwise/liblistwise/op/b/b.final.so						[ $destdir/$lwopdir/b.so ]
	install listwise/liblistwise/op/bn/bn.final.so					[ $destdir/$lwopdir/bn.so ]
	install listwise/liblistwise/op/c/c.final.so						[ $destdir/$lwopdir/c.so ]
	install listwise/liblistwise/op/can/can.final.so				[ $destdir/$lwopdir/can.so ]
	install listwise/liblistwise/op/cons/cons.final.so			[ $destdir/$lwopdir/cons.so ]
	install listwise/liblistwise/op/cp/cp.final.so					[ $destdir/$lwopdir/cp.so ]
	install listwise/liblistwise/op/d/d.final.so						[ $destdir/$lwopdir/d.so ]
	install listwise/liblistwise/op/datef/datef.final.so		[ $destdir/$lwopdir/datef.so ]
	install listwise/liblistwise/op/dj/dj.final.so					[ $destdir/$lwopdir/dj.so ]
	install listwise/liblistwise/op/dn/dn.final.so					[ $destdir/$lwopdir/dn.so ]
	install listwise/liblistwise/op/f/f.final.so						[ $destdir/$lwopdir/f.so ]
	install listwise/liblistwise/op/fn/fn.final.so					[ $destdir/$lwopdir/fn.so ]
	install listwise/liblistwise/op/g/g.final.so						[ $destdir/$lwopdir/g.so ]
	install listwise/liblistwise/op/hl/hl.final.so					[ $destdir/$lwopdir/hl.so ]
	install listwise/liblistwise/op/j/j.final.so						[ $destdir/$lwopdir/j.so ]
	install listwise/liblistwise/op/l/l.final.so						[ $destdir/$lwopdir/l.so ]
	install listwise/liblistwise/op/ls/ls.final.so					[ $destdir/$lwopdir/ls.so ]
	install listwise/liblistwise/op/lx/lx.final.so					[ $destdir/$lwopdir/lx.so ]
	install listwise/liblistwise/op/o/o.final.so						[ $destdir/$lwopdir/o.so ]
	install listwise/liblistwise/op/p/p.final.so						[ $destdir/$lwopdir/p.so ]
	install listwise/liblistwise/op/pop/pop.final.so				[ $destdir/$lwopdir/pop.so ]
	install listwise/liblistwise/op/r/r.final.so						[ $destdir/$lwopdir/r.so ]
	install listwise/liblistwise/op/rb/rb.final.so					[ $destdir/$lwopdir/rb.so ]
	install listwise/liblistwise/op/re/re.final.so					[ $destdir/$lwopdir/re.so ]
	install listwise/liblistwise/op/rp/rp.final.so					[ $destdir/$lwopdir/rp.so ]
	install listwise/liblistwise/op/rx/rx.final.so					[ $destdir/$lwopdir/rx.so ]
	install listwise/liblistwise/op/s/s.final.so						[ $destdir/$lwopdir/s.so ]
	install listwise/liblistwise/op/shift/shift.final.so		[ $destdir/$lwopdir/shift.so ]
	install listwise/liblistwise/op/sort/sort.final.so			[ $destdir/$lwopdir/sort.so ]
	install listwise/liblistwise/op/stat/stat.final.so			[ $destdir/$lwopdir/stat.so ]
	install listwise/liblistwise/op/sx/sx.final.so					[ $destdir/$lwopdir/sx.so ]
	install listwise/liblistwise/op/t/t.final.so						[ $destdir/$lwopdir/t.so ]
	install listwise/liblistwise/op/u/u.final.so						[ $destdir/$lwopdir/u.so ]
	install listwise/liblistwise/op/up/up.final.so					[ $destdir/$lwopdir/up.so ]
	install listwise/liblistwise/op/uu/uu.final.so					[ $destdir/$lwopdir/uu.so ]
	install listwise/liblistwise/op/v/v.final.so						[ $destdir/$lwopdir/v.so ]
	install listwise/liblistwise/op/vf/vf.final.so					[ $destdir/$lwopdir/vf.so ]
	install listwise/liblistwise/op/vp/vp.final.so					[ $destdir/$lwopdir/vp.so ]
	install listwise/liblistwise/op/w/w.final.so						[ $destdir/$lwopdir/w.so ]
	install listwise/liblistwise/op/wvf/wvf.final.so				[ $destdir/$lwopdir/wvf.so ]
	install listwise/liblistwise/op/wvp/wvp.final.so				[ $destdir/$lwopdir/wvp.so ]
	install listwise/liblistwise/op/x/x.final.so						[ $destdir/$lwopdir/x.so ]
	install listwise/liblistwise/op/xch/xch.final.so				[ $destdir/$lwopdir/xch.so ]
	install listwise/liblistwise/op/y/y.final.so						[ $destdir/$lwopdir/y.so ]
	install listwise/liblistwise/op/z/z.final.so						[ $destdir/$lwopdir/z.so ]
	install listwise/liblistwise/op/ln/ln.final.so					[ $destdir/$lwopdir/ln.so ]
}

[ @install.debug ] : [ @debug ]
{
	install -d																							[ $destdir/$libdir ]
	install [ $liblistwise_debug ]													[ $destdir/$libdir/$libname ]

	rm -rf																									[ $destdir/$lwopdir ] 2>/dev/null
	install -d																							[ $destdir/$lwopdir ]

	install listwise/liblistwise/op/-X/-X.debug.so					[ $destdir/$lwopdir/-X.so ]
	install listwise/liblistwise/op/C/C.debug.so						[ $destdir/$lwopdir/C.so ]
	install listwise/liblistwise/op/b/b.debug.so						[ $destdir/$lwopdir/b.so ]
	install listwise/liblistwise/op/bn/bn.debug.so					[ $destdir/$lwopdir/bn.so ]
	install listwise/liblistwise/op/c/c.debug.so						[ $destdir/$lwopdir/c.so ]
	install listwise/liblistwise/op/can/can.debug.so				[ $destdir/$lwopdir/can.so ]
	install listwise/liblistwise/op/cons/cons.debug.so			[ $destdir/$lwopdir/cons.so ]
	install listwise/liblistwise/op/cp/cp.debug.so					[ $destdir/$lwopdir/cp.so ]
	install listwise/liblistwise/op/d/d.debug.so						[ $destdir/$lwopdir/d.so ]
	install listwise/liblistwise/op/datef/datef.debug.so		[ $destdir/$lwopdir/datef.so ]
	install listwise/liblistwise/op/dj/dj.debug.so					[ $destdir/$lwopdir/dj.so ]
	install listwise/liblistwise/op/dn/dn.debug.so					[ $destdir/$lwopdir/dn.so ]
	install listwise/liblistwise/op/f/f.debug.so						[ $destdir/$lwopdir/f.so ]
	install listwise/liblistwise/op/fn/fn.debug.so					[ $destdir/$lwopdir/fn.so ]
	install listwise/liblistwise/op/g/g.debug.so						[ $destdir/$lwopdir/g.so ]
	install listwise/liblistwise/op/hl/hl.debug.so					[ $destdir/$lwopdir/hl.so ]
	install listwise/liblistwise/op/j/j.debug.so						[ $destdir/$lwopdir/j.so ]
	install listwise/liblistwise/op/l/l.debug.so						[ $destdir/$lwopdir/l.so ]
	install listwise/liblistwise/op/ls/ls.debug.so					[ $destdir/$lwopdir/ls.so ]
	install listwise/liblistwise/op/lx/lx.debug.so					[ $destdir/$lwopdir/lx.so ]
	install listwise/liblistwise/op/o/o.debug.so						[ $destdir/$lwopdir/o.so ]
	install listwise/liblistwise/op/p/p.debug.so						[ $destdir/$lwopdir/p.so ]
	install listwise/liblistwise/op/pop/pop.debug.so				[ $destdir/$lwopdir/pop.so ]
	install listwise/liblistwise/op/r/r.debug.so						[ $destdir/$lwopdir/r.so ]
	install listwise/liblistwise/op/rb/rb.debug.so					[ $destdir/$lwopdir/rb.so ]
	install listwise/liblistwise/op/re/re.debug.so					[ $destdir/$lwopdir/re.so ]
	install listwise/liblistwise/op/rp/rp.debug.so					[ $destdir/$lwopdir/rp.so ]
	install listwise/liblistwise/op/rx/rx.debug.so					[ $destdir/$lwopdir/rx.so ]
	install listwise/liblistwise/op/s/s.debug.so						[ $destdir/$lwopdir/s.so ]
	install listwise/liblistwise/op/shift/shift.debug.so		[ $destdir/$lwopdir/shift.so ]
	install listwise/liblistwise/op/sort/sort.debug.so			[ $destdir/$lwopdir/sort.so ]
	install listwise/liblistwise/op/stat/stat.debug.so			[ $destdir/$lwopdir/stat.so ]
	install listwise/liblistwise/op/sx/sx.debug.so					[ $destdir/$lwopdir/sx.so ]
	install listwise/liblistwise/op/t/t.debug.so						[ $destdir/$lwopdir/t.so ]
	install listwise/liblistwise/op/u/u.debug.so						[ $destdir/$lwopdir/u.so ]
	install listwise/liblistwise/op/up/up.debug.so					[ $destdir/$lwopdir/up.so ]
	install listwise/liblistwise/op/uu/uu.debug.so					[ $destdir/$lwopdir/uu.so ]
	install listwise/liblistwise/op/v/v.debug.so						[ $destdir/$lwopdir/v.so ]
	install listwise/liblistwise/op/vf/vf.debug.so					[ $destdir/$lwopdir/vf.so ]
	install listwise/liblistwise/op/vp/vp.debug.so					[ $destdir/$lwopdir/vp.so ]
	install listwise/liblistwise/op/w/w.debug.so						[ $destdir/$lwopdir/w.so ]
	install listwise/liblistwise/op/wvf/wvf.debug.so				[ $destdir/$lwopdir/wvf.so ]
	install listwise/liblistwise/op/wvp/wvp.debug.so				[ $destdir/$lwopdir/wvp.so ]
	install listwise/liblistwise/op/x/x.debug.so						[ $destdir/$lwopdir/x.so ]
	install listwise/liblistwise/op/xch/xch.debug.so				[ $destdir/$lwopdir/xch.so ]
	install listwise/liblistwise/op/y/y.debug.so						[ $destdir/$lwopdir/y.so ]
	install listwise/liblistwise/op/z/z.debug.so						[ $destdir/$lwopdir/z.so ]
	install listwise/liblistwise/op/ln/ln.debug.so					[ $destdir/$lwopdir/ln.so ]
}

[ @installdevheaders ] 
{
	install -d																							[ $destdir/$incdir ]
	install [ $dliblistwise/listwise.h	]										[ $destdir/$incdir/listwise.h ]

	install -d																							[ $destdir/$incdir/listwise ]
	install [ $dliblistwise/listwise/fs.h ]									[ $destdir/$incdir/listwise ]
	install [ $dliblistwise/listwise/transform.h ]					[ $destdir/$incdir/listwise ]
	install [ $dliblistwise/listwise/internal.h ]						[ $destdir/$incdir/listwise ]
	install [ $dliblistwise/listwise/iterate.h ]						[ $destdir/$incdir/listwise ]
	install [ $dliblistwise/listwise/lwx.h ]								[ $destdir/$incdir/listwise ]
	install [ $dliblistwise/listwise/object.h ]							[ $destdir/$incdir/listwise ]
	install [ $dliblistwise/listwise/operator.h ]						[ $destdir/$incdir/listwise ]
	install [ $dliblistwise/listwise/ops.h ]								[ $destdir/$incdir/listwise ]
	install [ $dliblistwise/listwise/re.h ]									[ $destdir/$incdir/listwise ]
}
