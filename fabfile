# variable defs, $cc, $cflags, etc
$dcommon = [ $* ]
+[ $dcommon/vars.fab ]

$commoninc = [ -I $dcommon ~ j ]
$cflags = [ $cflags $commoninc ]

# c files
+[@std.c]($dirs = $dcommon; -$cfabpaths; $cc $cflags)
+[@std.c.ext]($dirs = $dcommon; $ext = [ pic.o ]; $cflags = [ $cflags -fPIC ]; $cc)

#
# compile all o files
#

[ @all ] : [ $cfabpaths ~ xs/<o> ]

#
# tasks
#

[ @clean ]
{
	rm -f [ $dcommon/*.o ] 2>/dev/null
}
